{"ast":null,"code":"import \"core-js/modules/es.array.map.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport CommonForm from \"../../src/components/CommonForm\";\nimport CommonTable from \"../../src/components/CommonTable\";\nimport { getUser } from \"../../api/data\";\nexport default {\n  name: \"User\",\n  data: function data() {\n    return {\n      operateType: \"add\",\n      isShow: false,\n      operateFormLabel: [{\n        model: \"name\",\n        label: \"姓名\",\n        type: \"input\"\n      }, {\n        model: \"age\",\n        label: \"年龄\",\n        type: \"input\"\n      }, {\n        model: \"sex\",\n        label: \"性别\",\n        type: \"select\",\n        opts: [{\n          label: \"男\",\n          value: 1\n        }, {\n          label: \"女\",\n          value: 0\n        }]\n      }, {\n        model: \"birth\",\n        label: \"出生日期\",\n        type: \"date\"\n      }, {\n        model: \"addr\",\n        label: \"地址\",\n        type: \"input\"\n      }],\n      operateForm: {\n        name: \"\",\n        addr: \"\",\n        age: \"\",\n        birth: \"\",\n        sex: \"\"\n      },\n      formLabel: [{\n        model: \"keyword\",\n        label: \"\",\n        type: \"input\"\n      }],\n      searchForm: {\n        keyword: \"\"\n      },\n      tableData: [],\n      tableLabel: [{\n        prop: \"name\",\n        label: \"姓名\"\n      }, {\n        prop: \"age\",\n        label: \"年龄\"\n      }, {\n        prop: \"sexLabel\",\n        label: \"性别\"\n      }, {\n        prop: \"birth\",\n        label: \"出生日期\",\n        width: 200\n      }, {\n        prop: \"addr\",\n        label: \"地址\",\n        width: 320\n      }],\n      config: {\n        page: 1,\n        total: 30\n      }\n    };\n  },\n  components: {\n    CommonForm: CommonForm,\n    CommonTable: CommonTable\n  },\n  methods: {\n    confirm: function confirm() {\n      var _this = this;\n\n      if (this.operateType === \"edit\") {\n        this.$http.post(\"/user/edit\", this.operateForm).then(function (res) {\n          console.log(res);\n          _this.isShow = false;\n\n          _this.getList();\n        });\n      } else {\n        this.$http.post(\"/user/add\", this.operateForm).then(function (res) {\n          console.log(res);\n          _this.isShow = false;\n\n          _this.getList();\n        });\n      }\n    },\n    addUser: function addUser() {\n      this.isShow = true;\n      this.operateType = \"add\";\n      this.operateForm = {\n        name: \"\",\n        addr: \"\",\n        age: \"\",\n        birth: \"\",\n        sex: \"\"\n      };\n    },\n    getList: function getList() {\n      var _this2 = this;\n\n      var name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"\";\n      this.config.loading = true;\n      name ? this.config.page = 1 : \"\";\n      getUser({\n        page: this.config.page,\n        name: name\n      }).then(function (_ref) {\n        var res = _ref.data;\n        _this2.tableData = res.list.map(function (item) {\n          item.sexLabel = item.sex === 0 ? \"女\" : \"男\";\n          return item;\n        });\n        _this2.config.total = res.count;\n        _this2.config.loading = true;\n      });\n    },\n    editUser: function editUser(row) {\n      this.isShow = true;\n      this.operateType = \"edit\";\n      console.log(row);\n      this.operateForm = row;\n    },\n    delUser: function delUser(row) {\n      var _this3 = this;\n\n      this.$confirm(\"此操作将永久删除此组件，是否继续？\", \"提示\", {\n        confirmButtonText: \"确认\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(function () {\n        var id = row.id;\n\n        _this3.$http.post(\"/user/del\", {\n          id: id\n        }).then(function (res) {\n          console.log(res);\n\n          _this3.$message({\n            type: \"success\",\n            message: \"删除成功\"\n          });\n\n          _this3.getList();\n        });\n      });\n    }\n  },\n  created: function created() {\n    this.getList();\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;AAEA;EACAA,YADA;EAEAC,IAFA,kBAEA;IACA;MACAC,kBADA;MAEAC,aAFA;MAGAC,mBACA;QACAC,aADA;QAEAC,WAFA;QAGAC;MAHA,CADA,EAMA;QACAF,YADA;QAEAC,WAFA;QAGAC;MAHA,CANA,EAWA;QACAF,YADA;QAEAC,WAFA;QAGAC,cAHA;QAIAC,OACA;UACAF,UADA;UAEAG;QAFA,CADA,EAKA;UACAH,UADA;UAEAG;QAFA,CALA;MAJA,CAXA,EA0BA;QACAJ,cADA;QAEAC,aAFA;QAGAC;MAHA,CA1BA,EA+BA;QACAF,aADA;QAEAC,WAFA;QAGAC;MAHA,CA/BA,CAHA;MAwCAG;QACAV,QADA;QAEAW,QAFA;QAGAC,OAHA;QAIAC,SAJA;QAKAC;MALA,CAxCA;MA+CAC,YACA;QACAV,gBADA;QAEAC,SAFA;QAGAC;MAHA,CADA,CA/CA;MAsDAS;QACAC;MADA,CAtDA;MAyDAC,aAzDA;MA0DAC,aACA;QACAC,YADA;QAEAd;MAFA,CADA,EAKA;QACAc,WADA;QAEAd;MAFA,CALA,EASA;QACAc,gBADA;QAEAd;MAFA,CATA,EAaA;QACAc,aADA;QAEAd,aAFA;QAGAe;MAHA,CAbA,EAkBA;QACAD,YADA;QAEAd,WAFA;QAGAe;MAHA,CAlBA,CA1DA;MAkFAC;QACAC,OADA;QAEAC;MAFA;IAlFA;EAuFA,CA1FA;EA2FAC;IACAC,sBADA;IAEAC;EAFA,CA3FA;EA+FAC;IACAC,OADA,qBACA;MAAA;;MACA;QACA;UACAC;UACA;;UACA;QACA,CAJA;MAKA,CANA,MAMA;QACA;UACAA;UACA;;UACA;QACA,CAJA;MAKA;IACA,CAfA;IAgBAC,OAhBA,qBAgBA;MACA;MACA;MACA;QACA/B,QADA;QAEAW,QAFA;QAGAC,OAHA;QAIAC,SAJA;QAKAC;MALA;IAOA,CA1BA;IA2BAkB,OA3BA,qBA2BA;MAAA;;MAAA;MACA;MACAhC;MACAiC;QACAV,sBADA;QAEAvB;MAFA,GAGAkC,IAHA,CAGA;QAAA;QACA;UACAC;UACA;QACA,CAHA;QAIA;QACA;MACA,CAVA;IAWA,CAzCA;IA0CAC,QA1CA,oBA0CAC,GA1CA,EA0CA;MACA;MACA;MACAP;MACA;IACA,CA/CA;IAgDAQ,OAhDA,mBAgDAD,GAhDA,EAgDA;MAAA;;MACA;QACAE,uBADA;QAEAC,sBAFA;QAGAjC;MAHA,GAIA2B,IAJA,CAIA;QACA;;QACA,aACAO,IADA,CACA,WADA,EACA;UACAC;QADA,CADA,EAIAR,IAJA,CAIA;UACAJ;;UACA;YACAvB,eADA;YAEAoC;UAFA;;UAIA;QACA,CAXA;MAYA,CAlBA;IAmBA;EApEA,CA/FA;EAqKAC,OArKA,qBAqKA;IACA;EACA;AAvKA","names":["name","data","operateType","isShow","operateFormLabel","model","label","type","opts","value","operateForm","addr","age","birth","sex","formLabel","searchForm","keyword","tableData","tableLabel","prop","width","config","page","total","components","CommonForm","CommonTable","methods","confirm","console","addUser","getList","getUser","then","item","editUser","row","delUser","confirmButtonText","cancelButtonText","post","id","message","created"],"sourceRoot":"src/views","sources":["user.vue"],"sourcesContent":["<template>\r\n  <div class=\"manage\">\r\n    <el-dialog\r\n      :title=\"operateType === 'add' ? '新增' : '更新'\"\r\n      :visible.sync=\"isShow\"\r\n    >\r\n      <common-form\r\n        :form-label=\"operateFormLabel\"\r\n        :form=\"operateForm\"\r\n        :inline=\"true\"\r\n        ref=\"form\"\r\n      ></common-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"isShow = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"confirm\">确定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <div class=\"manage-header\">\r\n      <el-button type=\"primary\" @click=\"addUser\">新增</el-button>\r\n      <common-form\r\n        :form-label=\"formLabel\"\r\n        :form=\"searchForm\"\r\n        :inline=\"true\"\r\n        ref=\"form\"\r\n      >\r\n        <el-button type=\"primary\" @click=\"getList(searchForm.keyword)\"\r\n          >搜索</el-button\r\n        >\r\n      </common-form>\r\n    </div>\r\n\r\n    <common-table\r\n      :table-data=\"tableData\"\r\n      :table-label=\"tableLabel\"\r\n      :config=\"config\"\r\n      @changePage=\"getList()\"\r\n      @edit=\"editUser\"\r\n      @del=\"delUser\"\r\n    ></common-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport CommonForm from \"../../src/components/CommonForm\";\r\nimport CommonTable from \"../../src/components/CommonTable\";\r\nimport { getUser } from \"../../api/data\";\r\n\r\nexport default {\r\n  name: \"User\",\r\n  data() {\r\n    return {\r\n      operateType: \"add\",\r\n      isShow: false,\r\n      operateFormLabel: [\r\n        {\r\n          model: \"name\",\r\n          label: \"姓名\",\r\n          type: \"input\",\r\n        },\r\n        {\r\n          model: \"age\",\r\n          label: \"年龄\",\r\n          type: \"input\",\r\n        },\r\n        {\r\n          model: \"sex\",\r\n          label: \"性别\",\r\n          type: \"select\",\r\n          opts: [\r\n            {\r\n              label: \"男\",\r\n              value: 1,\r\n            },\r\n            {\r\n              label: \"女\",\r\n              value: 0,\r\n            },\r\n          ],\r\n        },\r\n        {\r\n          model: \"birth\",\r\n          label: \"出生日期\",\r\n          type: \"date\",\r\n        },\r\n        {\r\n          model: \"addr\",\r\n          label: \"地址\",\r\n          type: \"input\",\r\n        },\r\n      ],\r\n      operateForm: {\r\n        name: \"\",\r\n        addr: \"\",\r\n        age: \"\",\r\n        birth: \"\",\r\n        sex: \"\",\r\n      },\r\n      formLabel: [\r\n        {\r\n          model: \"keyword\",\r\n          label: \"\",\r\n          type: \"input\",\r\n        },\r\n      ],\r\n      searchForm: {\r\n        keyword: \"\",\r\n      },\r\n      tableData: [],\r\n      tableLabel: [\r\n        {\r\n          prop: \"name\",\r\n          label: \"姓名\",\r\n        },\r\n        {\r\n          prop: \"age\",\r\n          label: \"年龄\",\r\n        },\r\n        {\r\n          prop: \"sexLabel\",\r\n          label: \"性别\",\r\n        },\r\n        {\r\n          prop: \"birth\",\r\n          label: \"出生日期\",\r\n          width: 200,\r\n        },\r\n        {\r\n          prop: \"addr\",\r\n          label: \"地址\",\r\n          width: 320,\r\n        },\r\n      ],\r\n      config: {\r\n        page: 1,\r\n        total: 30,\r\n      },\r\n    };\r\n  },\r\n  components: {\r\n    CommonForm,\r\n    CommonTable,\r\n  },\r\n  methods: {\r\n    confirm() {\r\n      if (this.operateType === \"edit\") {\r\n        this.$http.post(\"/user/edit\", this.operateForm).then((res) => {\r\n          console.log(res);\r\n          this.isShow = false;\r\n          this.getList();\r\n        });\r\n      } else {\r\n        this.$http.post(\"/user/add\", this.operateForm).then((res) => {\r\n          console.log(res);\r\n          this.isShow = false;\r\n          this.getList();\r\n        });\r\n      }\r\n    },\r\n    addUser() {\r\n      this.isShow = true;\r\n      this.operateType = \"add\";\r\n      this.operateForm = {\r\n        name: \"\",\r\n        addr: \"\",\r\n        age: \"\",\r\n        birth: \"\",\r\n        sex: \"\",\r\n      };\r\n    },\r\n    getList(name = \"\") {\r\n      this.config.loading = true;\r\n      name ? (this.config.page = 1) : \"\";\r\n      getUser({\r\n        page: this.config.page,\r\n        name,\r\n      }).then(({ data: res }) => {\r\n        this.tableData = res.list.map((item) => {\r\n          item.sexLabel = item.sex === 0 ? \"女\" : \"男\";\r\n          return item;\r\n        });\r\n        this.config.total = res.count;\r\n        this.config.loading = true;\r\n      });\r\n    },\r\n    editUser(row) {\r\n      this.isShow = true;\r\n      this.operateType = \"edit\";\r\n      console.log(row);\r\n      this.operateForm = row;\r\n    },\r\n    delUser(row) {\r\n      this.$confirm(\"此操作将永久删除此组件，是否继续？\", \"提示\", {\r\n        confirmButtonText: \"确认\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"warning\",\r\n      }).then(() => {\r\n        const id = row.id;\r\n        this.$http\r\n          .post(\"/user/del\", {\r\n            id: id,\r\n          })\r\n          .then((res) => {\r\n            console.log(res);\r\n            this.$message({\r\n              type: \"success\",\r\n              message: \"删除成功\",\r\n            });\r\n            this.getList();\r\n          });\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.getList();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.manage-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}